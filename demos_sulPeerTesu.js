(self["webpackChunklacus"]=self["webpackChunklacus"]||[]).push([[349],{9683:function(){},7104:function(){},31930:function(){},24090:function(){},16695:function(){},61715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});n(50879);var r=n(25715),a=(n(87753),n(111)),c=n(67294),l=n.n(c),o=n(38573);function i(e){var t=(0,c.useRef)(e);t.current=(0,c.useMemo)((function(){return e}),[e]);var n=(0,c.useRef)();return n.current||(n.current=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.current.apply(this,e)}),n.current}var u=i,s=(n(68137),n(76563));function d(e,t){var n=new Map((null!==t&&void 0!==t?t:[]).map((e=>[e,!0])));return(null!==e&&void 0!==e?e:[]).filter((e=>!n.has(e)))}function h(e){return Array.from(new Set(null!==e&&void 0!==e?e:[]))}var f=e=>{var t=e.checkable,n=e.highlightKeys,r=e.checkedKeys,a=e.checkRetain,i=e.onCheck,f=e.onSearch,p=(0,c.useState)(!1),v=(0,o.Z)(p,2),m=v[0],y=v[1],k=(0,c.useMemo)((()=>!d(n,r).length),[n,r]),b=u((e=>{f(e),y(Boolean(e))})),E=u((()=>{var e=k?d(r,n):a?h(n.concat(r)):n;null===i||void 0===i||i(e,{checked:!k})}));return l().createElement("div",{className:"tree-search-bar"},l().createElement(s.Z.Search,{onSearch:b,allowClear:!0,className:"tree-search-bar-input"}),l().createElement("div",{style:{display:m?"block":"none"}},l().createElement("div",{className:"tree-search-bar-result"},l().createElement("span",null,"\u5171",null===n||void 0===n?void 0:n.length,"\u6761\u7ed3\u679c"),t&&l().createElement("a",{onClick:E},k?"\u53d6\u6d88\u9009\u4e2d":"\u9009\u4e2d"," "))))},p=(0,c.memo)(f),v=n(52663),m=n(3911),y=n(51116);function k(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null===e||void 0===e||e.forEach((e=>{e.parentKeys=n,e.children&&t(e.children,[...n,e.key])}))}return t(e),e||[]}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",n=[];return null===e||void 0===e||e.forEach((e=>{var r;n.push(e),null!==(r=e[t])&&void 0!==r&&r.length&&n.push(...b(e[t],t))})),n}function E(e){return Object.assign({},...b(e).map((e=>({[e.key]:e.parentKeys}))))}function g(e,t,n){var r,a=e;return n.forEach((e=>{var t,n;a=null!==(t=null===(n=a.find((t=>t.key===e)))||void 0===n?void 0:n.children)&&void 0!==t?t:[]})),null!==(r=a.find((e=>e.key===t)))&&void 0!==r?r:{}}function S(e,t,n){if((0,y.HD)(e)&&t){var r=e.indexOf(t);if(r>-1){null===n||void 0===n||n();var a=e.substring(0,r),c=e.slice(r+t.length);return l().createElement("span",null,a,l().createElement("span",{style:{color:"#ff463a"}},t),c)}}return e}function K(e,t){var n=[],r=[],a=e.map((e=>{var a,c=e.title,l=e.render,i=e.children,u=(0,m.Z)(e,["title","render","children"]);if(c=S(c,t,(()=>{n.push(...u.parentKeys||[]),r.push(u.key)})),c=null!==(a=null===l||void 0===l?void 0:l(c))&&void 0!==a?a:c,i){var s=K(i,t),d=(0,o.Z)(s,3),h=d[0],f=d[1],p=d[2];return n.push(...p),r.push(...f),(0,v.Z)((0,v.Z)({},u),{},{title:c,children:h})}return(0,v.Z)({title:c,render:l},u)}));return[a,r,h(n)]}function O(e){var t=e.treeData,n=e.searchable,r=e.checkable,a=e.checkRetain,i=e.checkStrictly,s=e.parentKeysMap,f=(0,c.useState)(),v=(0,o.Z)(f,2),m=v[0],y=v[1],k=(0,c.useState)([]),b=(0,o.Z)(k,2),E=b[0],g=b[1],S=(0,c.useState)([]),O=(0,o.Z)(S,2),x=O[0],C=O[1],D=(0,c.useState)(),N=(0,o.Z)(D,2),Z=N[0],w=N[1],P=(0,c.useState)([]),j=(0,o.Z)(P,2),B=j[0],R=j[1];if(!n)return{highlightTreeData:t,keyword:m,highlightKeys:x,expandedKeys:E,checkedKeys:Z,onExpand:g,onCheck:w,onSearch:()=>null,SearchBar:()=>null};var M=(0,c.useMemo)((()=>{var e;return Z?i?null!==(e=Z.checked)&&void 0!==e?e:[]:Z:[]}),[Z,i]),A=u(((e,n)=>{var r;e=null!==(r=e)&&void 0!==r?r:m,y(e);var a=K(t,e),c=(0,o.Z)(a,3),l=c[0],i=c[1],u=c[2];if(!n)if(e)g(u);else{var d=[];M.forEach((e=>{d.push(e,...s[e])})),g(h(d))}C(i),R(l)})),H=u(((e,t)=>{if(null!==t&&void 0!==t&&t.event||null!==t&&void 0!==t&&t.checked||!a)w(e);else{var n,r=Array.isArray(e)?e:null!==(n=null===e||void 0===e?void 0:e.checked)&&void 0!==n?n:[],c=d(M,r),l=h([].concat(...c.map((e=>s[e])))),o=d(r,l);w(o)}})),T=u((()=>l().createElement(p,{onCheck:H,onSearch:A,checkable:r,checkRetain:a,checkedKeys:M,highlightKeys:x})));return(0,c.useEffect)((()=>{A(void 0,!0)}),[t]),{highlightTreeData:B,keyword:m,expandedKeys:E,highlightKeys:x,checkedKeys:Z,onSearch:A,onExpand:g,onCheck:H,SearchBar:T}}var x=n(13378),C=(n(38663),n(31930),n(3066)),D=n(88105),N=n(67170),Z=function(e){if(!e)return null;var t="function"===typeof e;return t?e():e},w=n(31064),P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},j=c.forwardRef((function(e,t){var n=e.prefixCls,r=e.title,a=e.content,l=P(e,["prefixCls","title","content"]),o=c.useContext(N.E_),i=o.getPrefixCls,u=function(e){if(r||a)return c.createElement(c.Fragment,null,r&&c.createElement("div",{className:"".concat(e,"-title")},Z(r)),c.createElement("div",{className:"".concat(e,"-inner-content")},Z(a)))},s=i("popover",n),d=i();return c.createElement(D.Z,(0,C.Z)({},l,{prefixCls:s,ref:t,overlay:u(s),transitionName:(0,w.mL)(d,"zoom-big",l.transitionName)}))}));j.displayName="Popover",j.defaultProps={placement:"top",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}};var B=j;n(81984);function R(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}var M=e=>{var t=e.value,n=e.children,r=e.onAddChild,a=e.onAddBrother,c=e.onDelete,o=e.onEdit,i=e.onMove;return l().createElement("div",{className:"tree-action-bar"},n,l().createElement("div",{className:"tree-action-bar-extra",onClick:R},r&&l().createElement(D.Z,{title:"\u6dfb\u52a0\u5b50\u7ea7"},l().createElement("div",{className:"tree-action-bar-icon",onClick:()=>r(t)},l().createElement("svg",{className:"icon","aria-hidden":"true"},l().createElement("use",{xlinkHref:"#ab-add-children"})))),[a,o,i,c].some(Boolean)&&l().createElement(B,{trigger:"click",overlayClassName:"tree-action-bar-popover",content:l().createElement("ul",{className:"tree-action-bar-menu"},o&&l().createElement("li",{onClick:()=>o(t)},l().createElement("svg",{className:"icon","aria-hidden":"true"},l().createElement("use",{xlinkHref:"#ab-edit"})),l().createElement("span",null,"\u7f16\u8f91")),a&&l().createElement("li",{onClick:()=>a(t)},l().createElement("svg",{className:"icon","aria-hidden":"true"},l().createElement("use",{xlinkHref:"#ab-add-brother"})),l().createElement("span",null,"\u6dfb\u52a0\u540c\u7ea7")),i&&l().createElement("li",{onClick:()=>i(t)},l().createElement("svg",{className:"icon","aria-hidden":"true"},l().createElement("use",{xlinkHref:"#ab-move-to"})),l().createElement("span",null,"\u79fb\u52a8\u5230")),c&&l().createElement("li",{onClick:()=>c(t)},l().createElement("svg",{className:"icon","aria-hidden":"true"},l().createElement("use",{xlinkHref:"#ab-delete"})),l().createElement("span",null,"\u5220\u9664"))),placement:"bottomRight"},l().createElement("div",{className:"tree-action-bar-icon"},l().createElement("svg",{className:"icon","aria-hidden":"true"},l().createElement("use",{xlinkHref:"#ab-dot-menu"}))))))},A=(0,c.memo)(M);function H(e){var t=e.treeData,n=e.operable,r=e.parentKeysMap,a=e.actionBarProps,i=e.actionBarRender,s=(0,c.useState)([]),d=(0,o.Z)(s,2),h=d[0],f=d[1],p=(0,c.useState)([]),v=(0,o.Z)(p,2),m=v[0],k=v[1];if(!n)return{operableTreeData:t,selectedKeys:m,onSelect:e=>k(e)};var b=u(((e,n)=>{var c=n.node,o=n.selected;if(k(e),o){var u=JSON.parse(JSON.stringify(t)),s=g(u,c.key,r[c.key]);s.render=null!==i&&void 0!==i?i:e=>l().createElement(A,(0,x.Z)({value:s.key},a),e),f(u)}else f(t)}));return(0,c.useEffect)((()=>{(0,y.kJ)(t)&&f(t)}),[t]),{selectedKeys:m,operableTreeData:h,onSelect:b}}function T(e){var t=e.dataSource,n=e.searchable,r=e.operable,a=e.checkable,l=e.checkRetain,o=e.checkStrictly,i=e.actionBarProps,u=e.actionBarRender,s=(0,c.useMemo)((()=>k(t)),[t]),d=(0,c.useMemo)((()=>E(s)),[s]),h=H({treeData:null!==t&&void 0!==t?t:[],operable:r,parentKeysMap:d,actionBarProps:i,actionBarRender:u}),f=h.operableTreeData,p=h.selectedKeys,v=h.onSelect,m=O({treeData:f,searchable:n,parentKeysMap:d,checkable:a,checkRetain:l,checkStrictly:o}),y=m.highlightTreeData,b=m.expandedKeys,g=m.checkedKeys,S=m.onExpand,K=m.onCheck,x=m.onSearch,C=m.SearchBar;return{treeData:y,expandedKeys:b,selectedKeys:p,checkedKeys:g,onExpand:S,onSelect:v,onCheck:K,onSearch:x,SearchBar:C}}var J=[{key:"0",title:"1\u7ea7\u9009\u98791",children:[{key:"1-0",title:"2\u7ea7\u9009\u98791-1",parentKeys:["0"]},{key:"1-1",title:"2\u7ea7\u9009\u98791-2",parentKeys:["0"]}],parentKeys:[]},{key:"1",title:"1\u7ea7\u9009\u98792",children:[{key:"2-0",title:"2\u7ea7\u9009\u98792-1",parentKeys:["1"]},{key:"2-1",title:"2\u7ea7\u9009\u98792-2",parentKeys:["1"]}],parentKeys:[]}];function L(){var e=T({dataSource:J,searchable:!0,operable:!0,checkable:!0,checkRetain:!0,actionBarProps:{onAddChild:()=>null,onDelete:()=>null,onAddBrother:()=>null,onEdit:()=>null,onMove:()=>null}}),t=e.treeData,n=e.expandedKeys,o=e.checkedKeys,i=e.SearchBar,u=e.onExpand,s=e.onCheck,d=e.onSelect;return l().createElement(c.Fragment,null,l().createElement(r.Z,{title:"\u641c\u7d22\u6811",style:{width:300},size:"small"},l().createElement(i,null),l().createElement(a.Z,{checkable:!0,onCheck:s,onSelect:d,onExpand:u,treeData:t,checkedKeys:o,expandedKeys:n,showLine:{showLeafIcon:!1}})))}},51116:function(e,t,n){"use strict";function r(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}function a(e){return r(e,"String")}function c(e){return r(e,"Array")}function l(e){return"undefined"!==typeof e}n.d(t,{HD:function(){return a},kJ:function(){return c},Xq:function(){return l}})},52663:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{Z:function(){return c}})},13753:function(e,t,n){"use strict";n.r(t);n(38663),n(9683)},68137:function(e,t,n){"use strict";n(38663),n(7104),n(13753)},81984:function(e,t,n){"use strict";n(38663),n(24090)},87753:function(e,t,n){"use strict";n(38663),n(16695)}}]);